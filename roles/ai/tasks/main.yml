---
- name: Wait for Ollama
  ansible.builtin.uri:
    url: http://localhost:11434
    method: GET
  register: result
  until: result.status == 200
  retries: 40
  delay: 5

- name: Pull starter models
  ansible.builtin.shell: docker exec ollama ollama list | grep -qw {{ item }} || docker exec ollama ollama pull {{ item }}
  loop:
    - llama3.2:latest
    - gemma3:12b
    - phi3:14b
    - nomic-embed-text:latest
  ignore_errors: true
